{% extends 'admin_homepage.html' %}

{% block content %}
<div class="approved-applications-container">
    <h2>Approved Applications</h2>

    <!-- Search and Sort Options -->
    <form method="GET" class="search-sort-form">
        <input type="text" name="q" placeholder="Search by student name..." value="{{ request.GET.q }}">

        <select name="sort_by">
            <option value="">Sort By</option>
            <option value="student__username_asc">Name (A-Z)</option>
            <option value="student__username_desc">Name (Z-A)</option>
            <option value="submitted_at_asc">Submission Date (Oldest First)</option>
            <option value="submitted_at_desc">Submission Date (Newest First)</option>
        </select>

        <button type="submit">Search</button>
    </form>

    <!-- Approved Applications Table -->
    <table class="styled-table">
        <thead>
            <tr>
                <th>Student Name</th>
                <th>Registration no</th>
                <th>Application Status</th>
                <th>Submitted At</th>
            </tr>
        </thead>
        <tbody>
            {% for app in approved_apps %}
            <tr>
                <td>{{ app.name }}</td>
                <td>{{ app.reg_no }}</td>
                <td>{{ app.status }}</td>
                <td>{{ app.submitted_at }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3">No approved applications found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
